(()=>{var e={};e.id=405,e.ids=[405,660],e.modules={2123:(e,t,a)=>{"use strict";a.r(t),a.d(t,{config:()=>T,default:()=>N,getServerSideProps:()=>_,getStaticPaths:()=>w,getStaticProps:()=>S,reportWebVitals:()=>C,routeModule:()=>R,unstable_getServerProps:()=>M,unstable_getServerSideProps:()=>D,unstable_getStaticParams:()=>O,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>E});var n={};a.r(n),a.d(n,{default:()=>v,getServerSideProps:()=>j});var r=a(7093),o=a(5244),l=a(1323),s=a(2899),i=a.n(s),c=a(6958),d=a.n(c),u=a(997),f=a(9816),m=a.n(f),b=a(6689),p=a(968),h=a.n(p),k=a(1664),y=a.n(k),g=a(5113);a(9090);var x=a(6947);let v=({users:e})=>{let[t,a]=(0,b.useState)(!1),[n,r]=(0,b.useState)([]),[o,l]=(0,b.useState)(!1),[s,i]=(0,b.useState)(null),[c,d]=(0,b.useState)(""),[f,p]=(0,b.useState)(e),[k,g]=(0,b.useState)(!1);(0,b.useEffect)(()=>{let e=localStorage.getItem("darkMode");e&&a("true"===e)},[]),(0,b.useEffect)(()=>{let e=document.body;t?e.classList.add("dark-mode"):e.classList.remove("dark-mode"),localStorage.setItem("darkMode",t.toString())},[t]),(0,b.useEffect)(()=>{let t=localStorage.getItem("lastResetStatsDate");new Date().toDateString();let a=new Date(e[0]?.lastUpdated).toDateString();if(!t||t!==a){let e=t?new Date(t).getDay():null,n=new Date().getDay(),r=t?S(new Date(t)):null,o=S(new Date),l=t?new Date(t).getMonth():null,s=new Date().getMonth();e!==n&&v(),r!==o&&j(),l!==s&&N(),localStorage.setItem("lastResetStatsDate",a)}},[e]);let v=async()=>{try{if(!(await fetch("/api/reset-daily-stats")).ok)throw Error("Failed to reset daily statistics")}catch(e){console.error("Error resetting daily statistics:",e)}},j=async()=>{try{if(!(await fetch("/api/reset-weekly-stats")).ok)throw Error("Failed to reset weekly statistics")}catch(e){console.error("Error resetting weekly statistics:",e)}},N=async()=>{try{if(!(await fetch("/api/reset-monthly-stats")).ok)throw Error("Failed to reset monthly statistics")}catch(e){console.error("Error resetting monthly statistics:",e)}},S=e=>{let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));t.setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));let a=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-a.getTime())/864e5+1)/7)};e&&0!==e.length||console.log("No users found");let w=e=>{r(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},_=async()=>{if(s&&!o){l(!0);try{if(!(await fetch(`/api/remove-task?taskId=${s}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to remove task");let e=[...f],t=e[0].tasks.filter(e=>e._id!==s);e[0].tasks=t,p(e)}catch(e){console.error("Error removing task:",e)}finally{l(!1),i(null),g(!1)}}},T=e=>{i(e._id),d(e.title),g(!0)};return(0,u.jsxs)("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:[(0,u.jsxs)(h(),{children:[u.jsx("title",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:"Tasks"}),u.jsx("link",{rel:"icon",href:"/task.ico",className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])})]}),(0,u.jsxs)("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" container",children:[u.jsx("h1",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" mt-2 mb-3",children:"TASK TRACKER"}),(0,u.jsxs)("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" row",children:[(0,u.jsxs)("main",{role:"main",className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" col-8",children:[u.jsx("h2",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" mt-2",children:"Task List"}),e?e.map(e=>u.jsx("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" mb-4",children:u.jsx("ul",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" list-group",children:e.tasks.map((e,t)=>(0,u.jsxs)("li",{onClick:()=>w(e._id),className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" "+((e.reminder?"list-group-item task-item fw-bold text-uppercase":"list-group-item task-item")||""),children:[u.jsx("h4",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" "+((e.reminder?"fw-bold":"")||""),children:e.title}),n.includes(e._id)&&(0,u.jsxs)("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:[(0,u.jsxs)("p",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:["Description: ",e.description]}),(0,u.jsxs)("p",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:["Date & Time: ",new Date(e.date).toLocaleString("en-GB",{dateStyle:"short",timeStyle:"short"})]}),u.jsx("button",{onClick:()=>T(e),disabled:o,className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" btn btn-danger",children:o?"Removing Task...":"Remove"})]})]},t))})},e._id)):"No tasks found"]}),(0,u.jsxs)("nav",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" col navbar mt-2",children:[(0,u.jsxs)("ul",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" nav flex-column",children:[u.jsx("li",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" nav-item",children:u.jsx(y(),{href:"/",legacyBehavior:!0,passHref:!0,children:u.jsx("a",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" nav-link",children:"Tasks"})})}),u.jsx("li",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" nav-item",children:u.jsx(y(),{href:"./TaskForm",legacyBehavior:!0,passHref:!0,children:u.jsx("a",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" nav-link",children:"Add Tasks"})})}),u.jsx("li",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" nav-item",children:u.jsx(y(),{href:"./Stats",legacyBehavior:!0,passHref:!0,children:u.jsx("a",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" nav-link",children:"Stats"})})}),u.jsx("li",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" nav-item",children:u.jsx(y(),{href:"./About",legacyBehavior:!0,passHref:!0,children:u.jsx("a",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" nav-link",children:"About"})})})]}),u.jsx("button",{onClick:()=>{a(!t)},className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" btn fixed btn-dark mt-3",children:t?"Light Mode":"Dark Mode"})]})]}),u.jsx("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" mt-5",children:u.jsx(x.default,{})})]}),(0,u.jsxs)("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" modal text-center",children:[u.jsx("header",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:(0,u.jsxs)("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" row",children:[u.jsx("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" col-2"}),u.jsx("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" col-8 text-center",children:u.jsx("h2",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:"Confirmation"})}),u.jsx("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" col-2",children:u.jsx("button",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:u.jsx("span",{"aria-hidden":"true",onClick:()=>g(!1),className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:"\xd7"})})})]})}),(0,u.jsxs)("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" modal-message",children:[(0,u.jsxs)("p",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:['Are you sure you want to remove the task "',c,'"?']})," ",u.jsx("p",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]]),children:"This action cannot be undone!"})]}),(0,u.jsxs)("div",{className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" modal-footer row",children:[u.jsx("button",{onClick:()=>g(!1),className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" btn btn-secondary col-4",children:"Cancel"}),u.jsx("button",{onClick:_,className:m().dynamic([["d74141954a285517",[k?"block":"none"]]])+" btn btn-danger col-4",children:"Remove"})]})]}),u.jsx(m(),{id:"d74141954a285517",dynamic:[k?"block":"none"],children:`*{-webkit-transition:all.2s ease-in-out;-moz-transition:all.2s ease-in-out;-o-transition:all.2s ease-in-out;transition:all.2s ease-in-out}body{background-color:#fff;color:#000}.dark-mode{background-color:#121212;color:#ffd700}.dark-mode input[type="text"],.dark-mode input[type="datetime-local"],.dark-mode textarea,.dark-mode .task-item,.dark-mode ul{background-color:#121212;color:#ffd700}.dark-mode .task-item:hover{background-color:#333}.dark-mode .card{color:#ffd700}.fixed{position:relative;padding:10px;margin:10px auto;bottom:0}.navbar{position:fixed;top:0;right:0;margin:0;padding:0;overflow:hidden;background-color:#333;width:30%}.navbar ul{list-style-type:none;margin:0 auto;padding:0;overflow:hidden;background-color:#333;width:100%}.navbar ul li{text-align:center}.navbar a,.navbar li label{float:left;display:block;width:100%;color:#f2f2f2;text-align:center;padding:14px 16px;text-decoration:none;margin-bottom:0}.navbar a:hover{background-color:#ddd;color:black}.navbar li label:hover{cursor:pointer}.task-item{cursor:pointer}.task-item:hover{background-color:#f9f9f9}input[type="text"],form input[type="datetime-local"],form textarea{-webkit-border-radius:30px;-moz-border-radius:30px;border-radius:30px}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:${k?"block":"none"}}.modal header{background-color:#333;color:#fff;padding:1rem}.modal-message{background-color:#fff;padding:1rem}.modal-footer{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;margin:0 auto;left:0;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:1rem}.modal header button{margin-left:1rem;-webkit-border-radius:25%;-moz-border-radius:25%;border-radius:25%;background-color:transparent}.modal header button:hover{background-color:#f00}.modal header button span{font-weight:bold;font-size:1rem;color:#fff}.dark-mode .modal{background-color:rgba(0,0,0,.5)}.dark-mode .modal header{background-color:##333;color:#ffd700}.dark-mode .modal-message{background-color:#121212;color:#ffd700}.dark-mode .modal-footer{background-color:#121212}`})]})},j=async e=>{try{let t=(await g.Z).db("test"),a=`::ffff:${e.req.headers["x-forwarded-for"]||e.req.socket.remoteAddress}`,n=await t.collection("userdatas").find({userId:a}).toArray();return{props:{users:JSON.parse(JSON.stringify(n))}}}catch(e){return console.error(e),{props:{users:[]}}}},N=(0,l.l)(n,"default"),S=(0,l.l)(n,"getStaticProps"),w=(0,l.l)(n,"getStaticPaths"),_=(0,l.l)(n,"getServerSideProps"),T=(0,l.l)(n,"config"),C=(0,l.l)(n,"reportWebVitals"),E=(0,l.l)(n,"unstable_getStaticProps"),P=(0,l.l)(n,"unstable_getStaticPaths"),O=(0,l.l)(n,"unstable_getStaticParams"),M=(0,l.l)(n,"unstable_getServerProps"),D=(0,l.l)(n,"unstable_getServerSideProps"),R=new r.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:d(),Document:i()},userland:n})},5113:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});let n=require("mongodb");if(!process.env.MONGODB_URI)throw Error('Invalid/Missing environment variable: "MONGODB_URI"');let r=process.env.MONGODB_URI,o={serverApi:{version:n.ServerApiVersion.v1,strict:!0,deprecationErrors:!0}},l=new n.MongoClient(r,o).connect()},6691:(e,t)=>{"use strict";var a,n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{ACTION_FAST_REFRESH:function(){return c},ACTION_NAVIGATE:function(){return o},ACTION_PREFETCH:function(){return i},ACTION_REFRESH:function(){return r},ACTION_RESTORE:function(){return l},ACTION_SERVER_ACTION:function(){return d},ACTION_SERVER_PATCH:function(){return s},PrefetchCacheEntryStatus:function(){return n},PrefetchKind:function(){return a},isThenable:function(){return u}});let r="refresh",o="navigate",l="restore",s="server-patch",i="prefetch",c="fast-refresh",d="server-action";function u(e){return e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(function(e){e.AUTO="auto",e.FULL="full",e.TEMPORARY="temporary"})(a||(a={})),function(e){e.fresh="fresh",e.reusable="reusable",e.expired="expired",e.stale="stale"}(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4318:(e,t,a)=>{"use strict";function n(e,t,a,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),a(8364),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9577:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return y}});let n=a(167),r=a(997),o=n._(a(6689)),l=a(1401),s=a(2045),i=a(7420),c=a(7201),d=a(1443),u=a(5469),f=a(7443),m=a(2905),b=a(4318),p=a(953),h=a(6691);function k(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}let y=o.default.forwardRef(function(e,t){let a,n;let{href:i,as:y,children:g,prefetch:x=null,passHref:v,replace:j,shallow:N,scroll:S,locale:w,onClick:_,onMouseEnter:T,onTouchStart:C,legacyBehavior:E=!1,...P}=e;a=g,E&&("string"==typeof a||"number"==typeof a)&&(a=(0,r.jsx)("a",{children:a}));let O=o.default.useContext(u.RouterContext),M=o.default.useContext(f.AppRouterContext),D=null!=O?O:M,R=!O,A=!1!==x,I=null===x?h.PrefetchKind.AUTO:h.PrefetchKind.FULL,{href:L,as:U}=o.default.useMemo(()=>{if(!O){let e=k(i);return{href:e,as:y?k(y):e}}let[e,t]=(0,l.resolveHref)(O,i,!0);return{href:e,as:y?(0,l.resolveHref)(O,y):t||e}},[O,i,y]),F=o.default.useRef(L),q=o.default.useRef(U);E&&(n=o.default.Children.only(a));let H=E?n&&"object"==typeof n&&n.ref:t,[B,K,z]=(0,m.useIntersection)({rootMargin:"200px"}),V=o.default.useCallback(e=>{(q.current!==U||F.current!==L)&&(z(),q.current=U,F.current=L),B(e),H&&("function"==typeof H?H(e):"object"==typeof H&&(H.current=e))},[U,H,L,z,B]);o.default.useEffect(()=>{},[U,L,K,w,A,null==O?void 0:O.locale,D,R,I]);let G={ref:V,onClick(e){E||"function"!=typeof _||_(e),E&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),D&&!e.defaultPrevented&&function(e,t,a,n,r,l,i,c,d){let{nodeName:u}=e.currentTarget;if("A"===u.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!d&&!(0,s.isLocalURL)(a)))return;e.preventDefault();let f=()=>{let e=null==i||i;"beforePopState"in t?t[r?"replace":"push"](a,n,{shallow:l,locale:c,scroll:e}):t[r?"replace":"push"](n||a,{scroll:e})};d?o.default.startTransition(f):f()}(e,D,L,U,j,N,S,w,R)},onMouseEnter(e){E||"function"!=typeof T||T(e),E&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e)},onTouchStart:function(e){E||"function"!=typeof C||C(e),E&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e)}};if((0,c.isAbsoluteUrl)(U))G.href=U;else if(!E||v||"a"===n.type&&!("href"in n.props)){let e=void 0!==w?w:null==O?void 0:O.locale,t=(null==O?void 0:O.isLocaleDomain)&&(0,b.getDomainLocale)(U,e,null==O?void 0:O.locales,null==O?void 0:O.domainLocales);G.href=t||(0,p.addBasePath)((0,d.addLocale)(U,e,null==O?void 0:O.defaultLocale))}return E?o.default.cloneElement(n,G):(0,r.jsx)("a",{...P,...G,children:a})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2905:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return i}});let n=a(6689),r=a(3815),o="function"==typeof IntersectionObserver,l=new Map,s=[];function i(e){let{rootRef:t,rootMargin:a,disabled:i}=e,c=i||!o,[d,u]=(0,n.useState)(!1),f=(0,n.useRef)(null),m=(0,n.useCallback)(e=>{f.current=e},[]);return(0,n.useEffect)(()=>{if(o){if(c||d)return;let e=f.current;if(e&&e.tagName)return function(e,t,a){let{id:n,observer:r,elements:o}=function(e){let t;let a={root:e.root||null,margin:e.rootMargin||""},n=s.find(e=>e.root===a.root&&e.margin===a.margin);if(n&&(t=l.get(n)))return t;let r=new Map;return t={id:a,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=r.get(e.target),a=e.isIntersecting||e.intersectionRatio>0;t&&a&&t(a)})},e),elements:r},s.push(a),l.set(a,t),t}(a);return o.set(e,t),r.observe(e),function(){if(o.delete(e),r.unobserve(e),0===o.size){r.disconnect(),l.delete(n);let e=s.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&s.splice(e,1)}}}(e,e=>e&&u(e),{root:null==t?void 0:t.current,rootMargin:a})}else if(!d){let e=(0,r.requestIdleCallback)(()=>u(!0));return()=>(0,r.cancelIdleCallback)(e)}},[c,a,t,d,f.current]),[m,d,(0,n.useCallback)(()=>{u(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6947:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(997),r=a(9816),o=a.n(r);a(6689);let l=()=>(0,n.jsxs)("div",{className:"jsx-8e220493c9bb913b footer",children:[(0,n.jsxs)("p",{className:"jsx-8e220493c9bb913b",children:["Task Tracker \xa9 ",new Date().getFullYear(),n.jsx("br",{className:"jsx-8e220493c9bb913b"}),"Version ",n.jsx("strong",{className:"jsx-8e220493c9bb913b",children:"2.1.1"})]}),n.jsx(o(),{id:"8e220493c9bb913b",children:".footer.jsx-8e220493c9bb913b{left:0;bottom:0;width:100%;text-align:center}.footer.jsx-8e220493c9bb913b p.jsx-8e220493c9bb913b{cursor:pointer;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:0 auto}"})]})},7443:(e,t,a)=>{"use strict";e.exports=a(7093).vendored.contexts.AppRouterContext},1664:(e,t,a)=>{e.exports=a(9577)},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9816:e=>{"use strict";e.exports=require("styled-jsx/style")},1017:e=>{"use strict";e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[899,614],()=>a(2123));module.exports=n})();